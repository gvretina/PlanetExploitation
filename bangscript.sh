#!/usr/bin/bash

s=$(adb devices | grep ^[0-9] | head -n 1 | sed 's/\s.*$//')

usage() { echo "Usage: $0 [-b <string>] [-m <string>] example: -b 2M -m 700" 1>&2; exit 1; }

while getopts ":b:m:" o; do
    case "${o}" in
        b)
            b=${OPTARG}
            ;;
        m)
            m=${OPTARG}
            ;;
        *)
            usage
            ;;
    esac
done
shift $((OPTIND-1))

if [ -z "${b}" ] || [ -z "${m}" ]; then
    usage
fi

scrcpy -b$b -m$m -s $s &
